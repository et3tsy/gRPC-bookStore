## 【Go之路】gRPC 入门及简单应用

### RPC是什么？

在分布式计算，远程过程调用（英语：Remote Procedure Call，缩写为  RPC）是一个计算机通信协议。该协议允许运行于一台计算机的程序调用另一个地址空间（通常为一个开放网络的一台计算机）的子程序，而程序员就像调用本地程序一样，无需额外地为这个交互作用编程（无需关注细节）。

RPC是一种服务器-客户端（Client/Server）模式，经典实现是一个通过`发送请求-接受回应`进行信息交互的系统。

<img src="https://www.liwenzhou.com/images/Go/grpc/grpc.svg" border="0" />

### gRPC

跨平台、跨语言的中间件

```
grpc可以跨语言使用。支持多种语言 支持C++、Java、Go、Python、Ruby、C#、Node.js、Android Java、Objective-C、PHP等编程语言。可以在多种环境中运行和交互。
用java写一个服务端，可以用go语言写客户端调用。
```

基于IDL

```
基于 IDL ( 接口定义语言（Interface Define Language）)文件定义服务，通过 proto3 工具生成指定语言的数据结构、服务端接口以及客户端 Stub
```

序列化

```
序列化支持 PB（Protocol Buffer）和 JSON，PB 是一种语言无关的高性能序列化框架，基于 HTTP/2 + PB, 保障了 RPC 调用的高性能。
PB vs JSON: https://blog.csdn.net/Aria_Miazzy/article/details/85537808
```



#### 微服务中gRPC

微服务架构中，由于每个服务对应的代码库是独立运行的，无法直接调用，彼此间的通信就是个大问题.

gRPC可以实现将大的项目拆分为多个小且独立的业务模块，也就是服务。各服务间使用高效的`protobuf`协议进行RPC调用，gRPC默认使用`protocol buffers`，这是google开源的一套成熟的结构数据序列化机制



#### gRPC 安装  protoc安装

https://www.cnblogs.com/baoshu/p/13488106.html#head1



### 简单程序设计：利用gRPC作为中间件的数据管理系统

<a href="https://imgtu.com/i/qLs2l9"><img src="https://s1.ax1x.com/2022/04/05/qLs2l9.png" alt="qLs2l9.png" border="0" /></a>

### 项目地址：



### 设计说明——服务端

一般方便管理各类包和函数，我们将所有的包和函数分层。

```
|--dao 与操作数据库，与数据库相关
    |--book.go 与数据库交互，绑定书本对象
    |--mysql.go 完成mysql初始化
|--grpc 初始化gRPC服务
    |--grpc.go 初始化gRPC服务
|--logger 日志记录
    |--logger.go 设置日志记录
|--models 定义模型
    |--book.go 定义书本结构体
|--pb gRPC中间件方法
    |--Book.proto proto3源码
    |--Book.pb.go 中间件生成的go调用代码
    |--book.go 实现gRPC中指定api方法
|--settings
    |--config.yaml 配置环境属性
    |--settings.go 读取环境配置
|--server.go 服务端主函数
```



### 设计说明——服务端

一般方便管理各类包和函数，我们将所有的包和函数分层。

```
|--interact DOS交互设计
    |--console.go CMD窗口应用交互设计
|--models 定义模型
    |--book.go 定义书本结构体
|--pb gRPC中间件方法
    |--Book.proto proto3源码
    |--Book.pb.go 中间件生成的go调用代码
|--settings
    |--config.yaml 配置环境属性
    |--settings.go 读取环境配置
|--client.go 客户端主函数
```